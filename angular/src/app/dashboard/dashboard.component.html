<h3><b>Country of interest</b></h3><hr>
<p>Kenya</p><br>
<h3><b>Edit trasactions</b></h3><hr>
<p>Edit the transactions below to match the right information.</p><br>

<div class="row mb-3">
    <div class="col-md-6">
        <div class="input-group mb-1">
            <div class="input-group-prepend">
              <span class="input-group-text local" id="basic-addon1">Local&nbsp;<i class="fa fa-chevron-down"></i></span>
            </div>
            <div class="input-group-prepend">
              <span class="input-group-text search" id="basic-addon1"><i class="fa fa-search"></i></span>
            </div>
            <input type="text" class="form-control input" placeholder="Search" [(ngModel)]="searchText" aria-label="search" aria-describedby="basic-addon1">
        </div>
    </div>
    <div class="col-md-6 d-flex">
        <div class="input-group mb-1">
            <div class="input-group-prepend bg-light">
              <span class="input-group-text" id="basic-addon1"><i class="fa fa-filter"></i>&nbsp;&nbsp;Filter&nbsp;&nbsp;&nbsp;<i class="fa fa-chevron-down"></i></span>
            </div>
        </div>
        <div class="input-group mb-1">
            <div class="input-group-prepend bg-light">
              <span class="input-group-text" id="basic-addon1"><i class="fa fa-file"></i>&nbsp;&nbsp;Export as&nbsp;&nbsp;&nbsp;<i class="fa fa-chevron-down"></i></span>
            </div>
        </div>
        <div class="input-group-prepend">
          <span class="input-group-text date-icon bg-white" id="basic-addon1"><i class="fa fa-calendar"></i></span>
        </div>
        <input type="text" class="form-control w-100 date-input" placeholder="Start Date - End Date" aria-label="search" aria-describedby="basic-addon1">
    </div>
</div>

<div class="card p-3">
    <table class="table table-striped table-responsive">
        <thead>
          <tr>
            <th scope="col">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
              </div>
            </th>
            <th scope="col">Value Date</th>
            <th scope="col">Transaction ID</th>
            <th scope="col">Movement type</th>
            <th scope="col">Amount</th>
            <th scope="col">Status</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let transaction of transactions | filter:searchText; let i = index" [attr.data-index]="i">
            <th scope="row">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
              </div>
            </th>
            <td>{{ transaction.value_date }}</td>
            <td>{{ transaction.transaction_id }}</td>
            <td>{{ transaction.movement_type }}</td>
            <td>
                <input style="float: left" class="amount" [(ngModel)]="transaction.amount" type="password" [attr.id]="'toggle' + transaction.id"  name="amount"  [type]="hide ? 'password' : 'text'">
                <span class="icon" *ngIf="hide === true" (click)="toggleAmount(transaction.id)"><i class="fa fa-eye"></i></span>
                <span class="icon" *ngIf="hide === false" (click)="toggleAmount(transaction.id)"><i class="fa fa-eye-slash"></i></span>
            </td>
            <td>{{ transaction.status }}</td>
            <td>
                <a href="" data-bs-toggle="modal" [attr.data-bs-target]="'#editTransactionModal' + transaction.id"><i class="fa fa-edit"></i></a>&nbsp;&nbsp;
                <a href="" data-bs-toggle="modal" [attr.data-bs-target]="'#deleteTransactionModal' + transaction.id"><i class="fa fa-trash"></i></a>

                <!-- Edit Transaction Modal -->
                <div class="modal fade" [attr.id]="'editTransactionModal' + transaction.id" tabindex="-1" role="dialog" data-bs-backdrop="false" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h3 class="modal-title" id="exampleModalCenterTitle">Edit Transaction <span class="text-info">{{ transaction.transaction_id }}</span></h3>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <form action="" method="post">
                          <div class="form-group">
                            <div class="row">
                              <div class="col-md-12">
                                <input type="text" hidden class="form-control" name="id" [(ngModel)]="transaction.id">
                              </div>
                              <div class="col-md-6 mb-3">
                                <label for="">Value Date</label>
                                <input type="text" class="form-control w-100" name="value_date" [(ngModel)]="transaction.value_date">
                              </div>
                              <div class="col-md-6 mb-3">
                                <label for="">Transaction ID</label>
                                <input type="text" class="form-control w-100" name="transaction_id" [(ngModel)]="transaction.transaction_id">
                              </div>
                              <div class="col-md-6">
                                <label for="">Amount</label>
                                <input type="text" class="form-control w-100" name="amount" [(ngModel)]="transaction.amount">
                              </div>
                              <div class="col-md-6">
                                <label for="">Status</label>
                                <input type="text" class="form-control w-100" name="status" [(ngModel)]="transaction.status">
                              </div>
                              <div class="col-md-12 mt-3">
                                <label for="">Movement Type</label>
                                <input type="text" class="form-control w-100" name="movement_type" [(ngModel)]="transaction.movement_type">
                              </div>
                            </div>
                          </div>
                        </form>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-light me-auto" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-success" (click)="editTransaction(transaction.id, transaction.value_date, transaction.transaction_id, transaction.amount, transaction.status, transaction.movement_type)" data-bs-dismiss="modal">Save changes</button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Delete Transaction Modal -->
                <div class="modal fade" [attr.id]="'deleteTransactionModal' + transaction.id" tabindex="-1" role="dialog" data-bs-backdrop="false" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h3 class="modal-title" id="exampleModalCenterTitle">Delete Transaction <span class="text-info">{{ transaction.transaction_id }}</span></h3>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <h4>Are you sure you want to delete transaction <span class="text-danger">{{ transaction.transaction_id }}</span> ?</h4>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-light me-auto" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger" (click)="deleteTransaction(transaction.id)" data-bs-dismiss="modal">Delete</button>
                      </div>
                    </div>
                  </div>
                </div>
            </td>
          </tr>
        </tbody>
      </table>
</div>
